<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Warm Up UK – Order Form</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#f6f7f9; --card:#ffffff; --ink:#111; --muted:#555;
  --line:#e5e6ea; --gold:#c9a227; --danger:#f6d8d6; --danger-line:#e3a3a0;
  --blk:#0d0f12;
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
img{display:block;max-width:100%}
.container{max-width:860px;margin:16px auto 120px auto;padding:0 14px}
.card{background:#fff;border-radius:14px;padding:18px;border:1px solid var(--line);box-shadow:0 8px 24px rgba(0,0,0,.06)}

.header{display:flex;gap:18px;align-items:center}
.logo{width:140px;height:auto}
.co-title{font-weight:700}
.co-address,.co-phone{font-size:14px;color:var(--muted)}
.co-phone a{color:var(--gold);text-decoration:none;font-weight:600}

.section{margin-top:20px}
.section h2{margin:0 0 10px;font-size:22px}

label{display:block;font-size:14px;color:var(--muted);margin-bottom:6px}
input,textarea,select{
  width:100%;padding:14px;border-radius:12px;border:1px solid var(--line);background:#fff;font-size:16px
}
textarea{min-height:90px;resize:vertical}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
@media(max-width:600px){.grid-2{grid-template-columns:1fr}}

.table{
  border:1px solid var(--line);border-radius:12px;padding:0;background:#fff;overflow:hidden
}
.table-head{
  display:grid;grid-template-columns:2fr 1fr 1fr 1fr auto;
  background:var(--blk);color:#fff;font-weight:700;padding:12px;font-size:14px
}
.table-row{
  display:grid;grid-template-columns:2fr 1fr 1fr 1fr auto;
  gap:8px;padding:10px;border-top:1px solid var(--line)
}
.remove-btn{padding:10px;border:1px solid var(--line);border-radius:10px;background:#fff}

@media(max-width:600px){
  .table-head{display:none}
  .table-row{grid-template-columns:1fr}
  .table-row select,
  .table-row input{width:100%}
  .table-row input.line::before{content:"Line total: £";font-weight:600}
}

.totals{margin-top:12px}
.totals .row{display:flex;justify-content:space-between;padding:4px 0}
.grand{font-size:22px;font-weight:700}

.waiver{background:var(--danger);border:2px solid var(--danger-line);border-radius:14px;padding:14px;margin-top:10px}
.flash{animation:flash .8s ease-in-out 0s infinite}
@keyframes flash{0%,100%{box-shadow:none}50%{box-shadow:0 0 0 6px rgba(227,64,57,.35)}}

.sig-card{background:#fff;border:1px solid var(--line);border-radius:14px;padding:12px;margin-top:14px}
.sig-wrap{border:1px dashed #c9ccd3;border-radius:12px;background:#fff}
canvas{width:100%;height:240px;border-radius:12px;touch-action:none}

.actions{
  position:fixed;left:0;right:0;bottom:0;display:flex;gap:10px;
  padding:12px;background:#fff;border-top:1px solid var(--line);z-index:100;
  backdrop-filter:blur(8px)
}
.btn{padding:14px 16px;border-radius:12px;font-weight:700;font-size:16px;cursor:pointer;border:1px solid var(--line)}
.btn.gold{background:var(--gold);color:#111;border:none}
.btn.light{background:#eef0f4}
</style>
</head>

<body>

<div class="container" id="formRoot">

<div class="card">
  <div class="header">
    <img src="warmupuklogo.jpg" class="logo" alt="">
    <div>
      <div class="co-title">WARM UP UK LIMITED</div>
      <div class="co-address">321–323 Romford High Road, Essex, RM6 6AX</div>
      <div class="co-phone">Office: <a href="tel:01708300670">01708 300670</a></div>
    </div>
  </div>

  <!-- Customer -->
  <div class="section">
    <h2>Customer & Job Details</h2>
    <label>Customer Name</label><input id="custName">
    <div class="grid-2">
      <div><label>Phone (WhatsApp)</label><input id="custPhone" inputmode="tel"></div>
      <div><label>Email</label><input id="custEmail" type="email"></div>
    </div>
    <label>Install / Survey Date</label><input id="jobDate" type="date">
    <label>Installation Address</label><input id="siteAddr">
  </div>

  <!-- Products -->
  <div class="section">
    <h2>Products & Pricing</h2>
    <div class="table">
      <div class="table-head">
        <div>Product</div><div>Qty</div><div>Unit (£)</div><div>Total (£)</div><div></div>
      </div>
      <div id="rows"></div>
    </div>
    <button id="addRow" class="btn light" style="margin-top:10px">+ Add product</button>

    <div class="totals">
      <div class="row"><div>Subtotal</div><div>£<span id="sub">0.00</span></div></div>
      <div class="row"><div>Admin Fee</div><div>£150.00</div></div>
      <div class="row"><label><input type="checkbox" id="vat"> Include VAT (20%)</label><div>£<span id="vatVal">0.00</span></div></div>
      <div class="row grand"><div>Grand Total</div><div>£<span id="grand">150.00</span></div></div>
    </div>
  </div>

  <!-- Waiver -->
  <div class="waiver" id="waiverBox">
    <h3>Express Waiver</h3>
    <p>Checking “I agree” instructs us to proceed immediately and waives the standard cooling-off period.</p>
    <label><input type="checkbox" id="agree"> I agree to the Express Waiver and authorise works to proceed.</label>
  </div>

  <!-- Signatures -->
  <div class="section">
    <h2>Signatures</h2>
    <div class="sig-card">
      <strong>Customer Signature</strong>
      <div class="sig-wrap"><canvas id="sigCustomer"></canvas></div>
      <button class="btn light" data-clear="sigCustomer">Clear</button>
    </div>

    <div class="sig-card">
      <strong>Company Rep Signature</strong>
      <div class="sig-wrap"><canvas id="sigCompany"></canvas></div>
      <button class="btn light" data-clear="sigCompany">Clear</button>
    </div>
  </div>

</div>
</div>

<div class="actions">
  <button class="btn light" id="clearForm">Clear Form</button>
  <button class="btn gold" id="generate">Generate PDF</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/signature_pad@5.0.4/dist/signature_pad.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>

<script>
const PRODUCTS=[
  {label:"Loft Insulation – 270mm Fibreglass (per m²)",unit:18},
  {label:"SuperQuilt Multifoil (per m²)",unit:35},
  {label:"TLX Silver (per m²)",unit:48},
  {label:"Spray Foam Removal (per m²)",unit:28},
  {label:"Loft Boarding (per m²)",unit:30}
];

const rowsEl=document.getElementById('rows');
function addRow(){
  const row=document.createElement('div');
  row.className='table-row';
  row.innerHTML=`
    <select class="prod">${PRODUCTS.map((p,i)=>`<option value="${i}">${p.label}</option>`).join("")}</select>
    <input class="qty" value="0" inputmode="numeric">
    <input class="unit">
    <input class="line" readonly>
    <button class="remove-btn" type="button">Remove</button>
  `;
  rowsEl.appendChild(row);

  const prod=row.querySelector('.prod');
  const qty=row.querySelector('.qty');
  const unit=row.querySelector('.unit');
  const line=row.querySelector('.line');

  unit.value=PRODUCTS[0].unit;

  function calc(){
    line.value=(qty.value*unit.value||0).toFixed(2);
    totals();
  }
  prod.onchange=()=>{unit.value=PRODUCTS[prod.value].unit;calc()};
  qty.oninput=calc; unit.oninput=calc;
  row.querySelector('.remove-btn').onclick=()=>{row.remove();totals()};
  calc();
}
document.getElementById('addRow').onclick=addRow;
addRow();

function totals(){
  let s=0;document.querySelectorAll('.line').forEach(l=>s+=+l.value||0);
  const admin=150;
  const v=document.getElementById('vat').checked?(s+admin)*0.2:0;
  document.getElementById('sub').textContent=s.toFixed(2);
  document.getElementById('vatVal').textContent=v.toFixed(2);
  document.getElementById('grand').textContent=(s+admin+v).toFixed(2);
}
document.getElementById('vat').onchange=totals;

function sig(id){
  const c=document.getElementById(id);
  const pad=new SignaturePad(c,{penColor:"#111"});
  function resize(){
    const r=Math.max(devicePixelRatio||1,1);
    const rect=c.getBoundingClientRect();
    c.width=rect.width*r;
    c.height=240*r;
    c.style.height="240px";
    c.getContext("2d").scale(r,r);
    pad.clear();
  }
  window.addEventListener('resize',resize);
  resize();
  return pad;
}
const padC=sig('sigCustomer'); const padR=sig('sigCompany');
document.querySelectorAll('[data-clear]').forEach(b=>b.onclick=()=>({sigCustomer:padC,sigCompany:padR}[b.dataset.clear].clear()));

document.getElementById('clearForm').onclick=()=>{
  document.querySelectorAll("input,textarea").forEach(e=>{if(e.type==="checkbox")e.checked=false; else e.value=""});
  rowsEl.innerHTML="";addRow();totals();padC.clear();padR.clear();
  window.scrollTo(0,0);
};

document.getElementById('generate').onclick=()=>{
  if(!document.getElementById('agree').checked){
    document.getElementById('waiverBox').classList.add('flash');
    return;
  }
  html2pdf().from(document.getElementById('formRoot')).save();
};
</script>
</body>
</html>
